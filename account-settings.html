<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Account Settings | KGR</title>
    <link rel="stylesheet" href="style.css" />
    <script src="https://unpkg.com/feather-icons"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <link rel="icon" id="favicon" href="Black_KGR.png" />
  </head>
  <body>
    <div id="header-placeholder"></div>
    <main class="account-settings-main">
      <div class="settings-sidebar">
        <div class="sidebar-header">
          <div class="avatar-upload-wrapper">
            <img
              src="avatar.png"
              alt="User Avatar"
              class="sidebar-avatar"
              id="sidebar-avatar-img"
            />
            <label for="avatar-upload-input" class="avatar-edit-button">
              <i data-feather="edit-2"></i>
            </label>
            <input
              type="file"
              id="avatar-upload-input"
              accept="image/png, image/jpeg"
              class="hidden-file-input"
            />
          </div>
          <h3 id="sidebar-username">Loading...</h3>
          <p id="sidebar-email">Loading...</p>
        </div>
        <nav class="settings-nav">
          <a href="#profile-settings" class="active"
            ><i data-feather="user"></i> Profile</a
          >
          <a href="#notification-settings"
            ><i data-feather="bell"></i> Notifications</a
          >
          <a href="#data-privacy-settings"
            ><i data-feather="database"></i> Data & Privacy</a
          >
        </nav>
        <div class="sidebar-footer">
          <button id="logout-button" class="sidebar-logout-btn">
            <i data-feather="log-out"></i>
            <span>Logout</span>
          </button>
        </div>
      </div>
      <div class="settings-content">
        <section id="profile-settings" class="settings-section">
          <h2>Profile Settings</h2>
          <form class="settings-form" id="profile-form">
            <div class="form-group">
              <label for="full-name">Full Name</label>
              <input type="text" id="full-name" required />
            </div>
            <div class="form-group">
              <label for="email-address">Email Address</label>
              <input type="email" id="email-address" disabled />
            </div>
            <div class="form-group">
              <label for="designation">Designation</label>
              <div class="custom-select-wrapper" id="designation-select">
                <div class="custom-select-trigger">
                  <span>Student</span>
                  <i data-feather="chevron-down"></i>
                </div>
                <div class="custom-options">
                  <span class="custom-option" data-value="Student"
                    >Student</span
                  >
                  <span class="custom-option" data-value="Researcher"
                    >Researcher</span
                  >
                  <span class="custom-option" data-value="Editor">Editor</span>
                  <span class="custom-option" data-value="Common Person"
                    >Common Person</span
                  >
                </div>
              </div>
              <select id="designation" name="designation" style="display: none">
                <option>Student</option>
                <option>Researcher</option>
                <option>Editor</option>
                <option>Common Person</option>
              </select>
            </div>
            <button type="submit" class="save-btn">Save Profile Changes</button>
          </form>
        </section>

        <section id="notification-settings" class="settings-section">
          <h2>Notification Settings</h2>
          <p class="section-description">
            Manage how you receive notifications from us.
          </p>
          <div class="settings-option checkbox-option">
            <label for="email-updates">New Research Papers</label>
            <input type="checkbox" id="email-updates" />
          </div>
        </section>
        <section id="data-privacy-settings" class="settings-section">
          <h2>Data & Privacy</h2>
          <p class="section-description">
            Review our policies and manage your account data.
          </p>
          <a
            href="data-privacy.html"
            class="settings-link-btn"
            target="_blank"
            rel="noopener noreferrer"
          >
            <i data-feather="shield"></i>
            <span>Read our Full Data & Privacy Policy</span>
          </a>
          <a
            href="#"
            id="delete-account-link"
            class="settings-link-btn"
            target="_blank"
            rel="noopener noreferrer"
          >
            <i data-feather="trash-2"></i>
            <span>Contact Support to Delete Account</span>
          </a>
        </section>
      </div>
    </main>
    <div id="access-modal" class="hidden">
      <div class="access-modal-content">
        <button id="close-modal-btn" class="close-modal-btn">&times;</button>
        <i data-feather="lock"></i>
        <h2 id="modal-title">Access Restricted</h2>
        <p id="modal-message"></p>
        <a href="" id="modal-login-btn" class="submit-btn">Login to Continue</a>
      </div>
    </div>
    <div id="footer-placeholder"></div>
    <script src="app.js"></script>
    <script>
      document.addEventListener("DOMContentLoaded", () => {
        setTimeout(() => {
          document.querySelectorAll(".settings-nav a").forEach((anchor) => {
            anchor.addEventListener("click", function (e) {
              e.preventDefault();
              document
                .querySelectorAll(".settings-nav a")
                .forEach((link) => link.classList.remove("active"));
              this.classList.add("active");
              const targetId = this.getAttribute("href");
              document
                .querySelector(targetId)
                .scrollIntoView({ behavior: "smooth" });
            });
          });
        }, 500);
      });
    </script>
  </body>
</html>
